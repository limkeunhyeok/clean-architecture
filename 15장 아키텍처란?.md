# Clean Architecture

## 05 아키텍처

### 15장 아키텍처란?

> 소프트웨어 시스템의 아키텍처란 시스템을 구축했던 사람들이 만들어낸 시스템의 형태다. 그 모양은 시스템을 컴포넌트로 분할하는 방법, 분할된 컴포넌트를 배치하는 방법, 컴포넌트가 서로 의사소통하는 방식에 따라 정해진다. 그리고 그 형태는 아키텍처 안에 담긴 소프트웨어 시스템이 쉽게 개발, 배포, 운영, 유지보수 되도록 만들어진다.

> 이러한 일을 용이하게 만드릭 위해서는 가능한 한 많은 선택지를, 가능한 한 오래 남겨두는 전략을 따라야 한다.

#### 개발

- 시스템 아키텍처는 개발팀이 시스템을 쉽게 개발할 수 있도록 뒷받침해야만 한다.
- 팀규모가 작을수록 개발 초기 아키텍처에 관련 제약들이 오히려 방해가 된다고 여길 가능성이 높다.
- 팀별 단일 아키텍처가 시스템을 배포, 운영, 유지보수하는 데 최적일 가능성은 거의 없다.

#### 배포

- 배포 비용이 높을수록 시스템의 유용성은 떨어진다.
  - 따라서 소프트웨어 아키텍처는 시스템을 단 한번에 쉽게 배포할 수 있도록 만들어야 한다.

#### 운영

- 아키텍처가 시스템 운영에 미치는 영향은 개발, 배포, 유지보수에 미치는 영향보다는 덜 극적이다.
- 좋은 소프트웨어 아키텍처는 시스템을 운영하는 데 필요한 요구도 알려준다.
  - 시스템 아키텍처가 개발자에게 시스템의 운영 방식을 잘 드러내 준다.
  - 시스템 아키텍처는 유스케이스, 기능, 시스템의 필수 행위를 일급(first-class) 엔티티로 격상시키고, 이들 요소가 개발자에게 주요 목표로 인식되도록 해야 한다.
    - 이를 통해 시스템을 이해하기 쉬워지며, 따라서 개발과 유지보수에 큰 도움이 된다.

#### 유지보수

- 유지보수는 모든 측면에서 봤을 때 소프트웨어 시스템에서 비용이 가장 많이 든다.
- 가장 큰 비용은 탐사(spelunking)와 이로 인한 위험부담에 있다.
  - 탐사: 기존 소프트웨어에 새로운 기능을 추가하거나 결함을 수정할 때, 소프트웨어를 파헤쳐서 어디를 고치는게 최선인지, 그리고 어떤 전략을 쓰는게 최적일지를 결정할 때 드는 비용이다.
- 시스템을 컴포넌트로 분리하고, 안정된 인터페이스를 두어 서로 격리한다.
  - 추가될 기능에 대한 길을 밝히고, 의도치 않은 장애에 대한 위험을 줄인다.

#### 선택사항 열어 두기

- 소프트웨어를 부드럽게 유지하는 방법은 선택사항(중요하지 않은 세부사항)을 가능한 한 많이, 그리고 가능한 한 오랫동안 열어 두는 것이다.
- 정책이란 시스템의 진정한 가치가 살아 있는 곳으로, 모든 업무 규칙과 업무 절차를 구체화 한다.
- 세부사항은 사람, 외부 시스템, 프로그래머가 정책과 소통할 때 필요한 요소지만, 정책이 가진 행위에는 조금도 영향을 끼치지 않는다.

> 좋은 아키텍트는 결정되지 않은 사항의 수를 최대화 한다.

#### 장치 독립성

- 장치 종속적이란 말은 코드와 입출력 장치가 결합되어있는 형태이다.
- 장치와 종속 되어있어 장치가 변경되거나 관리가 어려웠다.
  - 따라서 장치 독립성을 고안하게 된다.
- 오늘날의 운영체제는 입출력 장치를 소프트웨어 함수로 추상화 했고, 해당 함수는 천공카드와 같은 단위 레코드를 처리한다.

#### 결론

- 좋은 아키텍트는 세부사항을 정책으로부터 신중하게 가려내고, 정책이 세부사항과 결합되지 않도록 엄격하게 분리한다.
- 이를 통해 정책은 세부사항에 관한 어떠한 지식도 갖지 못하게 되며, 어떤 경우에도 세부사항에 의존하지 않게 된다.
- 좋은 아키텍트는 세부사항에 대한 결정을 가능한 한 오랫동안 미룰 수 있는 방향으로 정책을 설계한다.
